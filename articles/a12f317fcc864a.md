---
title: "分析や報告で役に立つ数学Tip3選"
emoji: "🦚"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["数学","データ","基礎"]
published: false
---

大事だけど個別で書くほどでもないな、というものを集めてみました。

お品書き
- 割合の変化はオッズ比で把握する
- 平均変化率は相乗平均で見る
- xxx

## 割合の比はオッズ比である

たとえば新機能の利用率が、10%→15％に変化したとして、
この割合は1.5倍(=0.15/0.1)になったといっていいのでしょうか？

それだと90%→95%になったときに5.6%しか増えてないことになり不公平ではないですか？

この計算をうまい具合にやってくれるのが「オッズ」という概念です。

オッズ比は$\frac{p}{1-p}$で表す数字で「利用した人は利用しなかった人の何倍いるか」を表します。

例えば、
10%のときは$\frac{0.1}{1 - 0.1} = 0.111..$,
15%のときは$\frac{0.15}{1 - 0.15} = 0.176..$となります。

それぞれのオッズを比にとることで$\frac{0.176..}{0.111..} = 1.586...$ となり、およそ1.59倍になったとみることができます。

オッズ比の考え方なら90%→95%も2.11倍になったと見ることができ、平等に評価できている感じがしますね。

## 割合の平均は相乗平均である

たとえば2017年の状態を100として、
その後 年5%,8%,4%,10%伸びているサービスがあるとしましょう。
2021年現在の値は$100 * 1.05 * 1.08 * 1.04 * 1.1 = 129.73$ となります。

このとき平均伸び率は
$(1.05+1.08+1.04+1.10)/4 = 1.0675$ ではありません！
もしこの数字だった場合、2021年の数値は$100*1.0675^4=129.86..$ となり、実際の数字と合いません。

平均伸び率の考え方は「相乗平均」で考えます。高校で習ったやつですね。
式はわりと簡単で、$\sqrt[4]{1.05*1.08*1.04*1.1}=1.0672...$です。平均は+6.72%というわけですね。n乗根の計算がしにくく思えますが、エクセルとかの関数なら`=geomean()`と打てば計算してくれます。

これが平均伸び率です。この数字から2021年の数値を割り出すとぴったり129.73になります。逆の計算をしているだけなので当たり前ですね。

ちなみに「平均 ≧ 相乗平均」ということが知られており、通常の平均を使ってしまうと常に割高な予測になってしまうので注意しましょう。

今回はデータが4回分しかなかったのでそれほどずれませんでしたが、月ごとや日ごとなど分割数をあげるほど指数関数的にズレが大きくなっていくので注意しましょう。

## 微分積分系でなにか
---
title: "window関数をざっくり理解して分析に使ってみる"
emoji: "👌"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---


## はじめに

「window関数は行をまたいで集計できる関数」という趣旨の記事です。

- 分析する人向け
- 厳密な定義とかは扱いません
- BigQuery環境ですが、だいたいどこの環境でも動作すると思います

# window関数をざっくり理解する

window関数(分析関数)は `OVER()` を使ってテーブルの集計とかを行うためのもの。

OVERって名前の通り、行をまたいで集計してくれる関数です。



# OVER()の動作


# OVER句内の記述

`OVER()` は `()` 内の記述をあれこれ指定することで便利な集計が行なえます

よく使うところでは以下。これのやり方について紹介します。

- 割合・合計
- 移動平均
- ランキング

ここからはこんなテーブルをテストケースとして扱います。

|名前|部署|金額|
|:----:|:----:|:----:|
|koga|bizdev|100,000|
|aoki|corporate|100,000|
|abe|corporate|100,000|
|sato|writer|100,000|
|suzuki|writer|100,000|
|yamada|engineer|100,000|

## 割合や合計を出す


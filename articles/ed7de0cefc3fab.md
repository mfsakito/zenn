---
title: "firebaseã§ã®ãƒ­ã‚°ã¯ã©ã‚“ãªã‚‚ã®ãŒå–å¾—ã•ã‚Œã¦ã„ã‚‹ã®ã‹è¦³å¯Ÿã—ã¦ã¿ãŸ"
emoji: "ğŸ¦…"
type: "idea" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["firebase","ãƒ‡ãƒ¼ã‚¿åˆ†æ"]
published: false
---

firebaseã®ãƒ­ã‚°ã‚’åˆ†æã«ä½¿ã£ã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãŒå¤šã„ã¨æ€ã„ã¾ã™
GoogleAnalyticsã‚„BigQueryã¨ç°¡å˜ã«é€£æºã§ãã‚‹ã®ãŒã„ã„ã‚ˆã­
éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§å°‘ã—ãƒ‡ãƒ¼ã‚¿ã®ä¸€æ¬¡æƒ…å ±ã«ã•ã‚ã‚ã†ã¨æ€ã†ã¨ã€ä¸€ç•ªæ‰‹ã£å–ã‚Šæ—©ã„é“

androidã‚¢ãƒ—ãƒªã«é–¢ã—ã¦ã¯ã€ã©ã‚“ãªã‚¢ãƒ—ãƒªã§ã‚‚å–å¾—ã—ã¦ã„ã‚‹firebaseãƒ­ã‚°ã‚’é–²è¦§ã§ãã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã€ç ”ç©¶ã—ã¦ã¿ãŸã“ã¨ã‚’æ›¸ã„ã¦ãŠã“ã†ã¨æ€ã„ã¾ã™ã€‚
ãƒ­ã‚°ã®é–²è¦§æ–¹æ³•ã¯å¾ŒåŠã«æ›¸ã„ã¦ã„ã‚‹ã®ã§ã€è‡ªåˆ†ã§ã‚‚è¦‹ãŸã„æ–¹ã¯ãã£ã¡ã‚’ã©ã†ãã€‚

## ã„ã‚ã‚“ãªã‚¢ãƒ—ãƒªã‚’è¦‹ã¦ã‚ã‹ã£ãŸã“ã¨

- å…¨ä½“çš„ã«ç´°ã‹ãªãƒ­ã‚°ã‚’ã¨ã£ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã¯å¤šããªã„
- ã‚€ã—ã‚é–‹ç™ºã®å‹•ä½œç¢ºèªç”¨ã‹ãª?ã¨æ„Ÿã˜ã‚‹ãƒ­ã‚°ãŒå…¥ã£ã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã‚¢ãƒ—ãƒªã‚‚ã‚ã‚‹(image_loadã¨ã‹)
- ãŒã€ã‚ˆãã§ãã¦ã‚‹ãªã‚ã¨æ„Ÿã˜ã‚‹ã‚¢ãƒ—ãƒªã¯ç´°ã‹ã‚ã«å–å¾—ã•ã‚Œã¦ã‚‹ã“ã¨ã‚‚å¤šã„ã®ã§ã€ãƒ‡ãƒ¼ã‚¿æ–‡åŒ–ã‚’æ¸¬ã‚‹ã¨ã‹ã§ã¯å½¹ã«ç«‹ã¤ã‹ã‚‚ã—ã‚Œãªã„
- screen_viewç³»ã¯ `show` ãªã©ã‚¤ãƒ™ãƒ³ãƒˆåã‚’çµ±ä¸€ã—ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ç”»é¢åã‚’å…¥ã‚Œã‚‹ã¨ã“ã‚ãŒå¤šã„
- æ—¥æœ¬ã®ã‚¢ãƒ—ãƒªã«ã¯é«˜ç¢ºç‡ã§firebaseãŒå…¥ã£ã¦ã„ã‚‹ãŒã€ãƒ¯ãƒ¼ãƒ«ãƒ‰ç´šã‚µãƒ¼ãƒ“ã‚¹ã¯å†…è£½ã—ã¦ã„ã‚‹ã®ã‹ãªã„ã¨ã“ã‚ã‚‚å¤šã‹ã£ãŸã€‚

## ä»¥ä¸‹ãŠã¾ã‘ ï¼š æƒ…å ±åé›†ã«ä½¿ã£ãŸã“ã¨

è©³ã—ãã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ã‚‹ã“ã“ã®ãƒšãƒ¼ã‚¸
> è©³ç´°ãƒ­ã‚®ãƒ³ã‚°ã‚’æœ‰åŠ¹ã«ã—ã¦ SDK ã«ã‚ˆã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ­ã‚®ãƒ³ã‚°ã‚’ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã—ã€ã‚¤ãƒ™ãƒ³ãƒˆãŒæ­£ã—ããƒ­ã‚®ãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚å¯¾è±¡ã¨ãªã‚‹ã®ã¯ã€è‡ªå‹•ã§ãƒ­ã‚®ãƒ³ã‚°ã•ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã¨æ‰‹å‹•ã§ãƒ­ã‚®ãƒ³ã‚°ã•ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã®ä¸¡æ–¹ã§ã™ã€‚
https://firebase.google.com/docs/analytics/events?hl=ja&platform=android#view_events_in_the_android_studio_debug_log

ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã¯ã€
- ãƒ‡ãƒãƒƒã‚°ã®ãŸã‚ã®ä»•çµ„ã¿ã§ã¯ã‚ã‚‹ãŒã€ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰ã®ãƒ­ã‚°ã‚‚è¦‹ã‚Œã‚‹
- androidã«é–¢ã—ã¦ã¯ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ãŒã‚ã‚Œã°é–²è¦§å¯èƒ½ãªã®ã§ã€é–‹ç™ºä¸­ã®ã‚‚ã®ã§ãªãã¦ã‚‚ç¢ºèªã§ãã‚‹ = ä»–ç¤¾ã®ã‚¢ãƒ—ãƒªã§ã‚‚firebaseã®ãƒ­ã‚°ãŒè¦‹ã‚Œã‚‹

ã“ã‚ŒãŒã‚ã‹ã‚‹ã¨
- ã©ã‚“ãªã“ã¨ã‚’æ”¹å–„ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã‹
- ã©ã‚“ãªKPIãŒç½®ã‹ã‚Œã¦ã„ã‚‹ã‹
ãªã©ãŒæ€ã„æµ®ã‹ã¶ã®ã§ã€ãƒ©ã‚¤ãƒãƒ«ã®å‹•å‘ã‚„æŠ€è¡“çš„ã«ãƒ¬ãƒ™ãƒ«ã®é«˜ã„ã‚µãƒ¼ãƒ“ã‚¹ã®ä¸­èº«ã‚’å°‘ã—ã ã‘å£é–“è¦‹ã‚‹ã“ã¨ãŒã§ããã†ã§ã™ã€‚

ã‚‚ã†ã²ã¨ã¤ã€ã“ã‚ŒãŒã§ãã‚‹ã¨ãƒ­ã‚°ã®å‹•ä½œç¢ºèªã‚’ä¾é ¼å´å®Œçµã§å®Ÿè¡Œã§ãã‚‹ã®ã§ã€ä½•ã‹ã¨ã¨ã¦ã‚‚é‡å®ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
firebaseã§ã®ãƒ­ã‚®ãƒ³ã‚°ã‚’å¤šãã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã¨ã¦ã‚‚ãŠã™ã™ã‚ã§ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ä»•æ–¹

### æº–å‚™
1. android studioã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
2. adbã®è¨­å®šã‚’ã™ã‚‹
    ä»¥ä¸‹ã‚’é †ã«å…¥åŠ›ã™ã‚‹
    1. `echo "export PATH=$PATH:~/Library/Android/sdk/platform-tools/" >> ~/.zshrc`
    2. `source ~/.zshrc`
    3. `adb` ã¨æ‰“ã£ã¦ã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã‘ã‚Œã°å®Œäº† 

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«æˆåŠŸã—ã¦ã„ã‚‹ã¨ãã®ç”»é¢


### å®Ÿè·µ
1. ã‚¢ãƒ—ãƒªãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸç«¯æœ«ã‚’PCã«ã¤ãªã
2. terminalã‚’é–‹ã
3. ä»¥ä¸‹3ã¤ã®ã‚³ãƒãƒ³ãƒ‰ã‚’é †ã«å…¥åŠ›ã™ã‚‹
    - `adb shell setprop log.tag.FA VERBOSE`
    - `adb shell setprop log.tag.FA-SVC VERBOSE`
    - `adb logcat -v time -s FA FA-SVC`
4. å®Ÿæ©Ÿã®ã‚¢ãƒ—ãƒªã‚’æ“ä½œã—ã¦ãƒ­ã‚°ã‚’ç¢ºèªã™ã‚‹

## å®Ÿéš›ã«ã¿ã¦ã¿ã‚‹

æŸã‚µãƒ¼ãƒ“ã‚¹ã§ã¨ã£ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªãƒ­ã‚°ã®è¦ç´„

user_propertyã«ä»¥ä¸‹ã®é …ç›®ã‚’å…¥ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚
ã‚ã‚Šã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚‚ã®ãŒå¤šã„ã§ã™ãŒã€ç‹¬è‡ªã®ã‚‚ã®ã¨ã—ã¦xxxã‚’æ®‹ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

- åˆå›èµ·å‹•ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— `first_open_time(_fot)` (â€»)
- ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‹ã‚‰åˆå›èµ·å‹•ã¾ã§ã®æ™‚é–“(?) `first_open_after_install(_fi)` (â€»)
- ç´¯è¨ˆèµ·å‹•æ™‚é–“ `lifetime_user_engagement(_lte)` (â€»)
- ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“(?) `session_user_engagement(_se)` (â€»)
- ç´¯è¨ˆèµ·å‹•å›æ•°(?) `ga_session_number(_sno)` (â€»)
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ID`ga_session_id(_sid)` (â€»)

â€» firebaseãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¨ã£ã¦ã„ã‚‹ã‚‚ã®ã¨æ€ã‚ã‚Œã¾ã™ã€‚ä»–ã‚¢ãƒ—ãƒªã§ã‚‚å¤šãè¦‹ã‚‰ã‚ŒãŸã®ã§

```
user_property {
  set_timestamp_millis: xxxxxxxxx
  name: first_open_time(_fot)
  string_value: 
  int_value: xxxxxxxx
}
user_property {
  set_timestamp_millis: xxxxxxxxx
  name: first_open_after_install(_fi)
  string_value: 
  int_value: xxxxxxxxx
}
user_property {
  set_timestamp_millis: xxxxxxxxx
  name: lifetime_user_engagement(_lte)
  string_value: 
  int_value: xxxxxxxxx
}
user_property {
  set_timestamp_millis: xxxxxxxxx
  name: session_user_engagement(_se)
  string_value: 
  int_value: xxxxxxxxx
}
user_property {
  set_timestamp_millis: xxxxxxxxx
  name: ga_session_number(_sno)
  string_value: 
  int_value: xxxxxxxxx
}
user_property {
  set_timestamp_millis: xxxxxxxxx
  name: ga_session_id(_sid)
  string_value: 
  int_value: xxxxxxxxx
}
```

ãã®ä»–æ“ä½œã”ã¨ã®ãƒ­ã‚°ãªã©ã¯è©³ç´°ã«ã¨ã£ã¦ãªã„ã‚ˆã†ã§ã—ãŸãŒã€ç‰¹å®šã®ç”»é¢ã‚’é–‹ã„ãŸã¨ãã«ç‰¹åˆ¥ã«ç™ºç«ã•ã‚Œã‚‹ãƒ­ã‚°ãŒè¦‹ã¤ã‹ã£ãŸã®ã§ã€ãã®æ©Ÿèƒ½ã‚’KPIã¨ã—ã¦ç½®ã„ã¦ã„ã‚‹oræ©Ÿèƒ½ã¨ã—ã¦åŠ›ã‚’å…¥ã‚Œã¦ã„ãã®ã‹ãªã€ã¨ã„ã†å°è±¡ã‚’å—ã‘ã¾ã—ãŸã€‚

